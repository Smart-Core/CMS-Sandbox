#!/bin/bash

DIR="var"

if [ -d "$DIR" ]
then
    echo "$DIR directory exists!"
    chmod -R 0777 $DIR
else
    mkdir $DIR
    mkdir $DIR/cache
    mkdir $DIR/logs
    mkdir $DIR/mailspool
    mkdir $DIR/sessions

    chmod -R 0777 $DIR

    echo "$DIR directory created!"
fi

if [ -d "web/uploads" ]
then
    echo "web/uploads exists!"
else
    echo "web/uploads created"
    mkdir web/uploads
fi

# update directories permissions
find app/Resources -type d -exec chmod 777 {} \;
find app/usr -type d -exec chmod 777 {} \;
find web/images -type d -exec chmod 777 {} \;
find web/_media -type d -exec chmod 777 {} \;
find web/theme/css -type d -exec chmod 777 {} \;
find web/uploads -type d -exec chmod 777 {} \;

# update files permissions
find app/Resources -type f -exec chmod 666 {} \;
find app/usr -type f -exec chmod 666 {} \;
find web/images -type f -exec chmod 666 {} \;
find web/_media -type f -exec chmod 666 {} \;
find web/theme/css -type f -exec chmod 666 {} \;
find web/uploads -type f -exec chmod 666 {} \;
