#!/bin/bash

DIR="var"

if [ -d "$DIR" ]
then
    echo "$DIR directory exists!"
    chmod -R 0777 $DIR
else
    mkdir $DIR
    mkdir $DIR/cache
    mkdir $DIR/logs
    mkdir $DIR/mailspool

    chmod -R 0777 $DIR

    echo "$DIR directory created!"
fi

#chmod -R 0777 app/Resources
#chmod -R 0777 app/usr
#chmod -R 0777 web/images
#chmod -R 0777 web/_media
#chmod -R 0777 web/uploads

if [ -d "web/uploads" ]
then
else
    echo "web/uploads created"
    mkdir web/uploads
fi

# update directories permissions
find app/Resources -type d -exec chmod 777 {} \;
find app/usr -type d -exec chmod 777 {} \;
find web/images -type d -exec chmod 777 {} \;
find web/_media -type d -exec chmod 777 {} \;
find web/uploads -type d -exec chmod 777 {} \;

# update files permissions
find app/Resources -type f -exec chmod 644 {} \;
find app/usr -type f -exec chmod 644 {} \;
find web/images -type f -exec chmod 644 {} \;
find web/_media -type f -exec chmod 644 {} \;
find web/uploads -type f -exec chmod 644 {} \;
